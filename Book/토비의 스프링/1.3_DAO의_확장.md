## 1.3 DAO의 확장

- 상속을 이용한 관심사항 분리의 한계점을 극복하기 위해 **클래스의 분리 →** 클래스는 분리됐지만 코드의 수정 없이 db 연결 방법을 바꿀 수 없음

### 1.3.2 인터페이스의 도입

- DB 생성 부분을 인터페이스로 분리한다면
- 구현을 하지 않아도 된다
- 필요하다면 인터페이스를 구현하여 알아서 사용하면 된다
- 기존의 getConnection을 사용할 수 있다

```java
ConnectionMaker connection = new NConnectionMaker();
```

- 생성자에 사용자가 구현한 클래스명이 그대로 노출되어있다. ⇒ 결국 db가 변경되면 모든 코드를 찾아서 변경해야 한다..

### 1.3.3 관계설정 책임의 분리

- UserDao는 ConnectionMaker **오브젝트를 사용**한다
- 오브젝트 생성을 UserDao 내부에서 할 필요가 없다
- UserDao를 사용하는 클라이언트 객체가 ConnectionMaker의 오브젝트를 생성해서 파라미터로 UserDao에 전달한다
- UserDao는 인터페이스의 메서드를 이용하여 오브젝트를 이용 → 자바의 다형성 이용

⇒ UserDao 클래스에서 ConnectionMaker 생성을 완전히 분리 (**클래스 사이의 관계가 아닌  오브젝트 사이의 관계**)

⇒ 런타임시에 오브젝트가 생성되고 관계가 만들어진다

### 1.3.4 원칙과 패턴

- 개방 폐쇄 원칙: 클래스나 모듈은 확장에는 열려 있어야 하고 변경에는 닫혀 있어야 한다
    
    > DB 연결 방법을 확장하는 것에는 열려있고, DB 연결 방법이 변경되어도 핵심 기능을 구현한 코드는 변경에 영향을 받지 않는다
    > 
    
    → 높은 응집력: 하나의 모듈, 클래스가 하나의 책임 또는 괌심사에 집중되어 있다
    
    → 낮은 결합도: 하나의 오브젝트의 변경이 영향을 미치는 부분이 작다
    
- 전략 패턴: **변경이 필요한 알고리즘을 인터페이스를 통해 외부로 분리**시키고, 구현한 **클래스를 필요에 따라 변경**하며 사용하는 것