## 1.4 제어의 역전 IoC

UserDaoTest 클래스 내부에서 1. 어떤 ConnectionMaker 구현 클래스를 사용할지를 결정하고 2. 테스트를 진행

→ 두 가지의 책임을 분리하자

- 팩토리: 객체의 생성 방법을 결정하여 오브젝트를 만들고, 만든 오브젝트를 반환

### 1.4.2 오브젝트 팩토리의 활용

- DaoFactory에 여러 개의 Dao를 생성하는 메서드가 정의되어있다면, DB 연결 방식에 따라 변경해야 하는 코드의 양도 늘어남

### 1.4.3 제어권의 이전을 통한 제어관계 역전

제어의 역전: 프로그램의 제어 흐름 구조가 뒤바뀌는 것

- 오브젝트는 자신이 사용할 오브젝트를 선택 혹은 생성하지 않는다 (능동 x, 수동 o)
- 자신도 어느 시점에 생성되고 어디서 사용되는지 알 수 없다
- 모든 제어 권한을 다름 대상에게 위임

**제어의 역전 적용 예제**

1. 서블릿: 서블릿이 실행되는 시점을 개발자가 제어할 수 없다. 서블릿에 대한 제어 권한을 가진 컨테이너가 적절한 시점에 서블릿 객체를 만들고, 메서드를 호출한다
2. 템플릿 메서드 패턴: 제어권을 상위 템플릿 메서드에 넘기고 자신은 필요할 때 호출되어 사용되도록 한다
3. 프레임워크
    
    > [프레임워크와 라이브러리의 차이]
     라이브러리: 애플리케이션 코드는 애플리케이션 흐름을 직접 제어하며 필요에 따라 능동적으로 라이브러리를 선택
    프레임워크: 프레임워크가 흐름을 주도하고 애플리케이션 코드가 프레임워크에 의해 사용된다. → 애플리케이션 코든는 프레임워크에 의해 수동적으로 동작
    > 
4.  DaoFactory: UserDao는 factory에 의해 수동적으로 만들어지고 사용하는 connectionMaker 또한 수동적으로 공급되는 것을 사용해야 하나다

IoC를 적용하면 설계가 깔끔해지고 유연성이 증가하여 확장성이 좋아진다.

제어의 역전에서는 프레임워크 또는 컨테이너와 같이 생성과 관계설정, 사용, 생명주기 관리 등을 관장하는 존재가 필요하다